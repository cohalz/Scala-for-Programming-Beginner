#変数とコードの変更
##複雑な計算
前回、前々回と簡単に計算していきましたが、もうちょっと複雑な計算を見てみましょう。  
Sublime Text 2ではなくコマンドプロンプトやターミナルの画面に戻ります。  

税抜き価格でりんごが**100**円、みかんが**50**円、牛乳が**200**円、豚肉も**200**円ですべて消費税が**5**%としてみましょう。  

りんご1個買う場合はこう書けばいいですよね。
```
scala> 100 * 1.05
```

105.0と表示されると思います。

みかん1個と牛乳1本買う場合はこう書けますね。
```
scala> 50 * 1.05 + 200 * 1.05
```

もちろん**分配法則**を使ってこう短く書けます。  
かっこは数学と同じように優先順位を変えてくれます。
```
scala> (50 + 200) * 1.05
```

ここまで試したところで、**Sublime Text 2**に戻って以下のコードを書いて**2.scala**という名前で保存してください。  
(以下ではわかりやすさのために色を付けていますが、コードを書くときには関係はありません)
```scala
println((50 + 100 + 200) * 1.05)
println((200 * 2 + 200) * 1.05)
```
printlnの次のかっこの中に表示したい部分を書くんでしたね。  
保存したら、実行しないといけないのでコマンドプロンプトやターミナルに戻ります。
```
>scala :q
```
:qを押して元に戻ったら、cdコマンドを使って目的のファイルがある場所に移動します。  
移動したら、scalaファイルを実行します。
```
scala 2.scala
```
表示は以下のようになったと思います。
```
367.5
630.0
```

##消費税増税と値上がり
簡潔な代金計算プログラムを書きましたが、実際には消費税増税や値上げも起きますよね。  
消費税が**8**%になったら、**2.scala**も編集して8%にしないといけません。  
具体的には**1.05**と書いてあるのが税率なので**1.08**に変更すればいいですね。
```scala
println((50 + 100 + 200) * 1.08)
println((200 * 2 + 200) * 1.08)
```
保存して、さっきと同じように実行します。
```
scala 2.scala
```
実行結果は以下になります。
```
378.0
648.0
```

今は2行しかなかったので手間はかかりませんでしたが、実際の銀行で使われているようなプログラムはこんなに短くありません。  
全部変更する手間も大きいですし、1.05と書いてあってもすべてが消費税とは限らないので毎回確認しないと勝手に変えちゃダメですよね。
(バグで余計にお金を取っていたら大問題です。)

次に、豚肉が200円から**210**円に値上がりをしました。
じゃあ**2.scala**も変更しましょう...  
って、200円と書いてあるところは「牛乳」なのか「豚肉」なのかわかりませんよね。

牛乳と豚肉どっちが買いたかったのか、書いた人にしかわかりません。

##変数の登場
こんなとき、どうすればいいかというと**変数**と呼ばれるものを使います。
数学で使われる意味の変数とはちょっと意味が違います。  
数学で言えば、
```
(x + y) * (x + y)
```
といった式があった時に、
```
s = x + y とする。
```
として、
```
s * s
```
と式を簡単にするためにsを**定義**することがありますが、  
このsのことをプログラミング言語では**変数**と呼びます。

具体的にScalaではどう書くのか見てみましょう。
**2.scala**に書いてあるものを一旦消して、以下のコードを書いてください。
```scala
val apple = 100
println(apple)
```
1行目では、s = x + yと同じように数学で言えば、
```
apple = 100 とする。
```
と書いてあると読んでください。
これを実行するとちゃんと100と表示されます。

もう一つ例を見ましょう。
```scala
val pi = 3.14
```
これは**pi**(円周率のことです)を**3.14**として使いますよ、ということです。
直径2センチの円周の長さが欲しければ、あとの行に
```scala
println(2 * pi)
```
と書けばちゃんと、**6.28**と表示されます。

数学ではaやsやxなど、一文字で書きますが、プログラミングでは複数文字を使っていくのが普通です。  
勘違いをしないで欲しいところは、piは
```
p * i
```
とは**認識されない**のでappleみたいに書いても大丈夫というわけです。

##変数を用いた変更がしやすいコード
どんどん書いていきましょう。
**2.scala**に以下のコードを書きます。
```scala
val apple = 100
val orange = 50
val milk = 200
val pork = 200
val tax = 1.05
```
このように書くと書いた下の行からは、appleと書けば100と認識されますし、taxは1.05と認識されます。  
以下のコードを**2.scala**の最後に追記してください。
```scala
println((orange + apple + milk) * tax)
println((milk * 2 + pork) * tax)
```
つまり**2.scala**の内容が以下になっていれば大丈夫です。

```scala
val apple = 100
val orange = 50
val milk = 200
val pork = 200
val tax = 1.05
println((orange + apple + milk) * tax)
println((milk * 2 + pork) * tax)
```
これを実行した結果が増税前&値上げ前と同じように、
```
367.5
630.0
```
となったはずです。

増税と値上げもしちゃいましょう。
今のコードを消して、**2.scala**の内容を以下のものだけにしましょう。
```scala
val apple = 100
val orange = 50
val milk = 200
val pork = 210
val tax = 1.08
println((orange + apple + milk) * tax)
println((milk * 2 + pork) * tax)
```
ここで何が変わったかを見てみると、porkの行が**210**に、taxの行が**1.08**に変わってますね。  
**他の行は何も変わっていない**のがポイントです。  
このように変数にしておくと変更が簡単にすることができます。  
また合計を表示する行では「何をいくつ買った」というのも見やすいですよね。

最後に、注意点があります。  
税抜き100円のものを増税前と増税後の値段で表示したいとき以下のように書きたくなると思います。
```scala
val tax = 1.05
println(100 * tax)
val tax = 1.08
println(100 * tax)
```
ですが、これはエラーが起きます。
```
tax is already defined as value tax
val tax = 1.08
    ^
one error found

```
このように言われてしまいます。
定義し直すことはできません。
素直にこう書きましょう。
```scala
val oldtax = 1.05
val newtax = 1.08
println(100 * oldtax)
println(100 * newtax)
```

##練習用課題
練習として**2.scala**に以下の変更を加えてください。  
(1) 新たに変数を定義して、さらに多くの結果を表示させてみましょう。
  
(2) discountという変数を使い、引き算や割り算などで割引を表現してみましょう。

###提出方法
[こちら](https://github.com/cohalz/scala-for-programming-beginner/issues/new)を用意しました。  
はじめにGitHubアカウントを作成してください。  
アカウントを作成できたら、ログインをして、上記のページに飛びます。  
Titleに「02-1」など、いつの何番の問題かわかるように書いてください。  
Leave a commentに書いたコードを貼り付けて、Submit new issueを押してください。   
課題が提出できたら、しばらくして僕が評価を返します。  

また質問やご意見あればお待ちしてます。  
上記のページは課題以外でも質問やご意見を送ることができます。  
[こちら](https://github.com/cohalz/scala-for-programming-beginner/issues/new)かTwitter([@cohalz](https://twitter.com/cohalz))まで気軽にどうぞ。是非一緒に学びましょう。

次回 -> 作成中

前回 -> [簡単な計算とテキストエディタの導入](https://github.com/cohalz/scala-for-programming-beginner/tree/master/01)
